(function(e){function t(t){for(var a,s,i=t[0],l=t[1],c=t[2],d=0,p=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&p.push(n[s][0]),n[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],a=!0,i=1;i<r.length;i++){var l=r[i];0!==n[l]&&(a=!1)}a&&(o.splice(t--,1),e=s(s.s=r[0]))}return e}var a={},n={app:0},o=[];function s(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=a,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(r,a,function(t){return e[t]}.bind(null,a));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/admin/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0272":function(e,t,r){},"0710":function(e,t,r){"use strict";var a=r("7cf8"),n=r.n(a);n.a},"0ce0":function(e,t,r){},"0f7c":function(e,t,r){},"12ef":function(e,t,r){"use strict";var a=r("8a2d"),n=r.n(a);n.a},2703:function(e,t,r){"use strict";var a=r("9ea9"),n=r.n(a);n.a},3724:function(e,t,r){"use strict";var a=r("e6e5"),n=r.n(a);n.a},"3c0c":function(e,t,r){"use strict";var a=r("0272"),n=r.n(a);n.a},"4aa1":function(e,t,r){"use strict";var a=r("d8ed"),n=r.n(a);n.a},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("f751"),r("097d");var a=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("router-view")],1)},o=[],s={},i=s,l=(r("5c0b"),r("2877")),c=Object(l["a"])(i,n,o,!1,null,null,null),u=c.exports,d=r("8c4f"),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"bg"},[r("el-card",{staticClass:"box-card form-box",attrs:{shadow:"always"}},[r("div",{attrs:{slot:"header"},slot:"header"},[r("span",[e._v("欢迎登录")])]),r("el-form",{ref:"form",attrs:{rules:e.rules,size:"medium",model:e.form,"label-width":"60px"}},[r("el-form-item",{attrs:{label:"账户",prop:"username"}},[r("el-input",{attrs:{placeholder:"请输入账户名!","prefix-icon":"el-icon-user"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{placeholder:"请输入密码!","prefix-icon":"el-icon-key",type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.loginHandle}},[e._v("登录")])],1)],1),r("div",{staticClass:"link-box"},[r("router-link",{attrs:{to:"/register"}},[e._v("注册账户")]),r("router-link",{attrs:{to:"/"}},[e._v("忘记密码？")])],1)],1)],1)},m=[],f=(r("8e6e"),r("ac6a"),r("456d"),r("a481"),r("bd86")),h=(r("96cf"),r("3b8d"));function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(r,!0).forEach(function(t){Object(f["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var v={props:["redirect"],data:function(){return{form:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名！",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码！",trigger:"blur"},{type:"string",pattern:/^[0-9]{3,}$/,message:"密码至少3位数字",trigger:"blur"}]}}},methods:{loginHandle:function(){var e=this;this.$refs.form.validate(function(){var t=Object(h["a"])(regeneratorRuntime.mark(function t(r){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:r&&e.$store.dispatch("User/Login",g({},e.form)).then(function(t){var r=t.data,a=t.msg;sessionStorage.token=r.token,sessionStorage.role=r.role,sessionStorage.id=r.id,e.$message({message:a,type:"success",duration:1e3,onClose:function(){e.redirect?e.$router.replace(e.redirect):e.$router.push("/goods")}})}).catch(function(t){var r=t.msg;e.$message.error(r)});case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}}},y=v,w=(r("0710"),Object(l["a"])(y,p,m,!1,null,"5d11f1e6",null)),_=w.exports,x=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"bg"},[r("el-card",{staticClass:"box-card form-box",attrs:{shadow:"always"}},[r("div",{attrs:{slot:"header"},slot:"header"},[r("span",[e._v("注册")])]),r("el-form",{ref:"form",attrs:{rules:e.rules,size:"medium",model:e.form,"label-width":"60px"}},[r("el-form-item",{attrs:{prop:"username",label:"账户"}},[r("el-input",{attrs:{placeholder:"账户名长度在 3 到 15 个字符!","prefix-icon":"el-icon-user"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),r("el-form-item",{attrs:{prop:"password",label:"密码"}},[r("el-input",{attrs:{placeholder:"密码至少3位数字!","prefix-icon":"el-icon-key",type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),r("el-form-item",{attrs:{prop:"fullname",label:"姓名"}},[r("el-input",{attrs:{placeholder:"请填写真实姓名","prefix-icon":"el-icon-postcard"},model:{value:e.form.fullname,callback:function(t){e.$set(e.form,"fullname",t)},expression:"form.fullname"}})],1),r("el-form-item",{attrs:{prop:"sex",label:"性别"}},[r("el-radio-group",{model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[r("el-radio",{attrs:{label:"男"}}),r("el-radio",{attrs:{label:"女"}})],1)],1),r("el-form-item",{attrs:{prop:"tel",label:"手机"}},[r("el-input",{attrs:{placeholder:"请填写常用手机号码!","prefix-icon":"el-icon-mobile-phone"},model:{value:e.form.tel,callback:function(t){e.$set(e.form,"tel",t)},expression:"form.tel"}})],1),r("el-form-item",{attrs:{prop:"isAgree"}},[r("el-checkbox",{attrs:{label:"同意本站用户协议"},model:{value:e.form.isAgree,callback:function(t){e.$set(e.form,"isAgree",t)},expression:"form.isAgree"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.registerHandle}},[e._v("注 册")])],1)],1),r("div",{staticClass:"link-box"},[r("router-link",{attrs:{to:"/login"}},[e._v("登录账户")]),r("router-link",{attrs:{to:"/"}},[e._v("忘记密码？")])],1)],1)],1)},k=[];function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(r,!0).forEach(function(t){Object(f["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var $={data:function(){return{form:{username:"",password:"",fullname:"",sex:"男",tel:"",isAgree:[]},rules:{username:[{required:!0,message:"请输入用户名！",trigger:"blur"},{type:"string",min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码！",trigger:"blur"},{type:"string",pattern:/^[0-9]{3,}$/,message:"密码至少3位数字",trigger:"blur"}],fullname:[{required:!0,message:"请输入真实姓名！",trigger:"blur"},{type:"string",pattern:/^[\u4E00-\u9FA5A-Za-z\s]+(·[\u4E00-\u9FA5A-Za-z]+)*$/,message:"请输入有效的姓名",trigger:"blur"}],tel:[{required:!0,message:"请输入手机号码！",trigger:"blur"},{type:"string",pattern:/^1(3|4|5|6|7|8|9)\d{9}$/,message:"请输入有效的手机号码",trigger:"blur"}],isAgree:[{required:!0,message:"请同意用户协议",trigger:"change"}]}}},methods:{registerHandle:function(){var e=this;this.$refs.form.validate(function(t,r){t&&e.$store.dispatch("User/Register",j({},e.form)).then(function(t){var r=t.msg,a=t.data;sessionStorage.token=a.token,sessionStorage.role=a.role,e.$message({message:r,type:"success",duration:1e3,onClose:function(){e.$router.push("/goods")}})}).catch(function(t){var r=t.msg;e.$message.error(r)})})}}},C=$,P=(r("c286"),Object(l["a"])(C,x,k,!1,null,"a1dd87b2",null)),M=P.exports,S=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[e._v("用户列表")])]),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[r("el-table-column",{attrs:{prop:"id",label:"#"}}),r("el-table-column",{attrs:{sortable:"",label:"头像"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("img",{staticClass:"avatar",attrs:{src:e.row.avatar,width:"60",alt:""}})]}}])}),r("el-table-column",{attrs:{prop:"username",sortable:"",label:"账号"}}),r("el-table-column",{attrs:{prop:"fullname",sortable:"",label:"姓名"}}),r("el-table-column",{attrs:{prop:"sex",sortable:"",label:"性别"}}),r("el-table-column",{attrs:{prop:"tel",sortable:"",label:"手机"}}),r("el-table-column",{attrs:{prop:"role_name",sortable:"",label:"角色"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{attrs:{type:1===t.row.role?"danger":""}},[e._v(e._s(t.row.role_name))])]}}])}),r("el-table-column",{attrs:{prop:"login_time",width:"160",sortable:"",label:"上次登录"}}),r("el-table-column",{attrs:{prop:"login_count",sortable:"",label:"登录次数"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{plain:"",icon:"el-icon-edit",size:"small",type:"primary"},on:{click:function(r){return e.showEditModal(t.row)}}}),r("el-button",{attrs:{disabled:1==t.row.id,icon:"el-icon-delete",plain:"",size:"small",type:"danger"},on:{click:function(r){return e.showDeleteModal(t.row.id)}}})]}}])})],1)],1),r("el-dialog",{attrs:{title:"修改信息",visible:e.editModalShow},on:{"update:visible":function(t){e.editModalShow=t}}},[r("el-form",{attrs:{model:e.form,"label-position":"left","label-width":"80px"}},[r("el-form-item",{attrs:{label:"姓名"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.fullname,callback:function(t){e.$set(e.form,"fullname",t)},expression:"form.fullname"}})],1),r("el-form-item",{attrs:{label:"性别"}},[r("el-radio-group",{model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[r("el-radio",{attrs:{label:"男"}},[e._v("男")]),r("el-radio",{attrs:{label:"女"}},[e._v("女")])],1)],1),r("el-form-item",{attrs:{label:"手机"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.tel,callback:function(t){e.$set(e.form,"tel",e._n(t))},expression:"form.tel"}})],1),r("el-form-item",{attrs:{label:"权限"}},[r("el-select",{attrs:{placeholder:"请选择账户"},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}},e._l(e.roles,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"头像"}},[r("single-upload",{attrs:{"default-image":"/images/avatar/default.jpg",action:"/api/upload/avatar/",url:e.form.avatar},on:{"update:url":function(t){return e.$set(e.form,"avatar",t)}}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editModalShow=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.updateInfo}},[e._v("确 定")])],1)],1)],1)},R=[],I=r("bc3a"),E=r.n(I),F=function(e){return E.a.post("/api/admin/login",e)},D=function(e){return E.a.post("/api/admin/register",e)},A=function(e){return E.a.get("/api/admin",{params:e})},N=function(e){return E.a.get("/api/admin/list",{params:e})},V=function(e){return E.a.put("/api/admin",e)},U=function(e){return E.a.delete("/api/admin",{params:e})},z={login:F,register:D,loadInfo:A,list:N,update:V,remove:U},H=function(e){return E.a.post("/api/category",e)},L=function(e){return E.a.delete("/api/category",{params:e})},q=function(e){return E.a.put("/api/category",e)},B=function(e){return E.a.get("/api/category/sub",{params:e})},T={add:H,remove:L,update:q,load:B},G=function(e){return E.a.post("/api/admin/goods",e)},J=function(e){return E.a.delete("/api/admin/goods",{params:e})},Z=function(e){return E.a.put("/api/admin/goods",e)},K=function(e){return E.a.get("/api/admin/goods/list",{params:e})},Q=function(e){return E.a.get("/api/admin/goods",{params:e})},W={release:G,remove:J,update:Z,list:K,getDetail:Q},X=function(e){return E.a.get("/api/role/list",{params:e})},Y=function(e){return E.a.post("/api/role",e)},ee=function(e){return E.a.delete("/api/role",{params:e})},te=function(e){return E.a.put("/api/role",e)},re=function(e){return E.a.get("/api/role/config",{params:e})},ae=function(e){return E.a.post("/api/role/menu",e)},ne=function(e){return E.a.delete("/api/role/menu",{params:e})},oe={list:X,add:Y,remove:ee,update:te,loadConfig:re,createMenu:ae,removeMenu:ne},se=function(e){return E.a.get("/api/admin/order/list",{params:e})},ie={loadList:se},le=function(e){return E.a.delete("/api/upload",{params:e})},ce={remove:le},ue=function(e){return E.a.get("/api/menu/sub",{params:e})},de=function(e){return E.a.post("/api/menu",e)},pe=function(e){return E.a.put("/api/menu",e)},me=function(e){return E.a.delete("/api/menu",{params:e})},fe=function(e){return E.a.get("/api/menu/tree",{params:e})},he=function(e){return E.a.put("/api/menu/icon",e)},be={loadSub:ue,add:de,update:pe,remove:me,loadTree:fe,setIcon:he},ge=function(e){return E.a.get("/api/admin/icon/list",{params:e})},ve={list:ge},ye=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.action,headers:e.headers,"show-file-list":!1,"on-success":e.uploadSuccess,"on-error":e.uploadError,"before-upload":e.beforeUpload}},[e.url?r("div",{staticClass:"cover",on:{click:function(t){return t.stopPropagation(),e.removeImage(t)}}},[r("i",{staticClass:"el-icon-delete avatar-uploader-icon"})]):e._e(),e.url?r("img",{staticClass:"avatar",attrs:{src:e.url}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])},we=[],_e={name:"SingleUpload",props:{url:{type:String},defaultImage:{type:String},action:{type:String,required:!0}},data:function(){return{headers:{Authorization:"Bearer ".concat(sessionStorage.token)}}},methods:{beforeUpload:function(e){var t=/^image\/(jpe?g|png)$/,r=t.test(e.type),a=e.size/1024/1024<2;return r||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),r&&a},uploadSuccess:function(e,t){this.$emit("success",e),this.$emit("update:url",e.src)},uploadError:function(e,t,r){var a=e.status,n=e.message;switch(a){case 401:this.$message.error("错误:401,Token失效,请重新登录!");break;case 400:n=JSON.parse(n),this.$message.error("错误:400,".concat(n.msg));break;default:this.$message.error("错误:".concat(a,",").concat(n,"!"));break}},removeImage:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.url==this.defaultImage){e.next=6;break}return e.next=3,ce.remove({src:"."+this.url});case 3:t=e.sent,r=t.status,r&&this.$message.success("删除成功!");case 6:this.$emit("update:url","");case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},xe=_e,ke=(r("12ef"),Object(l["a"])(xe,ye,we,!1,null,null,null)),Oe=ke.exports;function je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function $e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?je(r,!0).forEach(function(t){Object(f["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):je(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Ce={name:"List",components:{SingleUpload:Oe},data:function(){return{tableData:[],roles:[],editModalShow:!1,form:{id:"",nickname:"",sex:"男",tel:"",role:"",avatar:""}}},created:function(){this.loadList(),this.loadRole()},methods:{loadList:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,z.list();case 2:t=e.sent,r=t.status,a=t.data,r&&(this.tableData=a);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),loadRole:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,oe.list();case 2:t=e.sent,r=t.status,a=t.data,r&&(this.roles=a);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),showEditModal:function(e){this.editModalShow=!0,this.form=$e({},e)},showDeleteModal:function(e){var t=this;this.$confirm("此操作将永久删除该账户, 是否继续?",{type:"warning"}).then(Object(h["a"])(regeneratorRuntime.mark(function r(){var a,n;return regeneratorRuntime.wrap(function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,z.remove({id:e});case 2:a=r.sent,n=a.status,a.msg,n&&(t.$message.success("删除成功！"),t.loadList());case 6:case"end":return r.stop()}},r)}))).catch(function(){t.$message.info("已取消删除")})},updateInfo:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,z.update($e({},this.form));case 2:t=e.sent,r=t.status,a=t.msg,r&&(this.editModalShow=!1,this.$message.success(a),this.loadList());case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},Pe=Ce,Me=(r("faf7"),Object(l["a"])(Pe,S,R,!1,null,"3cb663d6",null)),Se=Me.exports,Re=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[e._v("账户信息")])]),r("el-form",{attrs:{model:e.form,"label-position":"left","label-width":"100px"}},[r("el-form-item",{attrs:{label:"账户"}},[r("el-input",{attrs:{disabled:"","auto-complete":"off"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),r("el-form-item",{attrs:{label:"姓名"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.fullname,callback:function(t){e.$set(e.form,"fullname",t)},expression:"form.fullname"}})],1),r("el-form-item",{attrs:{label:"性别"}},[r("el-radio-group",{model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[r("el-radio",{attrs:{label:"男"}},[e._v("男")]),r("el-radio",{attrs:{label:"女"}},[e._v("女")])],1)],1),r("el-form-item",{attrs:{label:"手机"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.tel,callback:function(t){e.$set(e.form,"tel",e._n(t))},expression:"form.tel"}})],1),r("el-form-item",{attrs:{label:"权限"}},[r("el-select",{attrs:{placeholder:"请选择账户"},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}},e._l(e.roles,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"头像"}},[r("single-upload",{attrs:{"default-image":"/images/avatar/default.jpg",action:"/api/upload/avatar/",url:e.form.avatar},on:{"update:url":function(t){return e.$set(e.form,"avatar",t)}}})],1),r("el-button",{attrs:{type:"primary"},on:{click:e.updateInfo}},[e._v("修 改")])],1)],1)],1)},Ie=[];function Ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function Fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ee(r,!0).forEach(function(t){Object(f["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ee(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var De={components:{SingleUpload:Oe},data:function(){return{roles:[],form:{}}},created:function(){this.loadRole(),this.form=Fe({},this.$store.state.User.userInfo)},methods:{loadRole:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,oe.list();case 2:t=e.sent,r=t.status,a=t.data,r&&(this.roles=a);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),updateInfo:function(){var e=this,t=this.form.role;this.$store.dispatch("User/Update",Fe({},this.form)).then(function(r){r.status&&(sessionStorage.role=t,e.$message.success(r.msg))})}}},Ae=De,Ne=(r("3724"),Object(l["a"])(Ae,Re,Ie,!1,null,"4b8605e1",null)),Ve=Ne.exports,Ue=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[e._v("订单列表")])]),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[r("el-table-column",{attrs:{prop:"id",label:"#",width:"50"}}),r("el-table-column",{attrs:{width:"600"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-table",{attrs:{data:t.row.goodsList}},[r("el-table-column",{attrs:{prop:"name",label:"商品",width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"goods"},[r("div",{staticClass:"img"},[r("img",{attrs:{src:t.row.img_md}})]),r("div",{staticClass:"name"},[r("span",[e._v(e._s(t.row.name))])])])]}}],null,!0)}),r("el-table-column",{attrs:{prop:"goods_price",label:"单价"}}),r("el-table-column",{attrs:{prop:"goods_num",label:"数量"}})],1)]}}])}),r("el-table-column",{attrs:{prop:"payment",label:"付款总额"}}),r("el-table-column",{attrs:{prop:"create_time",sortable:"",label:"下单时间",width:"180"}}),r("el-table-column",{attrs:{prop:"status",sortable:"",label:"状态"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-edit",size:"small"}})]}}])})],1)],1)],1)},ze=[],He={data:function(){return{tableData:[]}},created:function(){var e=this;ie.loadList({status:"all"}).then(function(t){t.status&&(t.data.forEach(function(e){e.create_time=new Date(e.create_time).toLocaleString()}),e.tableData=t.data)})},methods:{}},Le=He,qe=(r("cd59"),Object(l["a"])(Le,Ue,ze,!1,null,"7fcf8288",null)),Be=qe.exports,Te=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",{staticClass:"container"},[r("el-header",[r("HeaderBar")],1),r("el-container",[r("LeftMenu"),r("el-main",[r("router-view")],1)],1)],1)},Ge=[],Je=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"nav-bar"},[a("div",{staticClass:"left"},[a("img",{staticClass:"logo am-margin-right-sm",attrs:{src:r("d742")}}),a("i",{staticClass:"el-icon-s-fold",on:{click:e.collapseHandle}})]),a("el-menu",{attrs:{mode:"horizontal",router:"","default-active":e.activeIndex,"background-color":"#31404e","text-color":"#fff","active-text-color":"#ffd04b"}},[a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[a("el-avatar",{attrs:{src:e.avatar,size:30}}),a("span",{staticClass:"username am-margin-left-sm"},[e._v(e._s(e.username))])],1),a("el-menu-item",[e._v("消息")]),a("el-menu-item",{attrs:{index:"/user/info"}},[e._v("设置")]),a("el-menu-item",[e._v("退出")])],2)],1)],1)},Ze=[],Ke=r("2f62");function Qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function We(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qe(r,!0).forEach(function(t){Object(f["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qe(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Xe={data:function(){return{activeIndex:"1"}},created:function(){this.getUserInfo()},computed:We({},Object(Ke["b"])("User",["username","avatar"])),methods:{collapseHandle:function(){this.$store.commit("Menu/ToggleMenu")},getUserInfo:function(){this.$store.dispatch("User/LoadInfo",{id:sessionStorage.id})}}},Ye=Xe,et=(r("7653"),Object(l["a"])(Ye,Je,Ze,!1,null,null,null)),tt=et.exports,rt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-menu",{attrs:{collapse:e.isCollapse,"default-openeds":["0"],"background-color":"#334e66",router:"","text-color":"#fff","active-text-color":"#ffd04b"}},e._l(e.menuTree,function(t,a){return r("el-submenu",{key:t.id,attrs:{index:a.toString()}},[r("template",{slot:"title"},[r("i",{class:"el-icon-"+t.icon}),r("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))])]),e._l(t.children,function(t){return r("el-menu-item",{key:t.id,attrs:{index:t.path}},[r("i",{class:"el-icon-"+t.icon}),r("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))])])})],2)}),1)},at=[];function nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function ot(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nt(r,!0).forEach(function(t){Object(f["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nt(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var st={computed:ot({},Object(Ke["c"])({isCollapse:function(e){return e.Menu.isCollapse},menuTree:function(e){return e.Menu.tree}}),{},Object(Ke["b"])({role:"User/role"})),created:function(){this.loadMenuTree()},methods:{loadMenuTree:function(){this.$store.dispatch("Menu/LoadTree",{id:sessionStorage.role})}}},it=st,lt=Object(l["a"])(it,rt,at,!1,null,null,null),ct=lt.exports,ut={components:{HeaderBar:tt,LeftMenu:ct}},dt=ut,pt=(r("ca9c"),Object(l["a"])(dt,Te,Ge,!1,null,null,null)),mt=pt.exports,ft=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[e._v("商品分类")])]),r("el-tree",{ref:"tree",attrs:{"default-expanded-keys":[1],lazy:"","node-key":"id",load:e.loadNode,props:e.defaultProps},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,n=t.data;return r("div",{staticClass:"node-box"},[r("span",{staticClass:"node-name"},[e._v(e._s(a.label))]),r("span",{staticClass:"node-action"},[r("el-button",{attrs:{type:"text",icon:"el-icon-edit-outline",size:"mini",disabled:1==n.id},on:{click:function(t){return t.stopPropagation(),e.openEditModal(a,n)}}},[e._v("\n\t\t\t\t\t\t编辑\n\t\t\t\t\t")]),r("el-button",{attrs:{type:"text",icon:"el-icon-plus",size:"mini"},on:{click:function(t){return t.stopPropagation(),e.openAddModal(a,n)}}},[e._v("\n\t\t\t\t\t\t添加\n\t\t\t\t\t")]),r("el-button",{attrs:{type:"text",icon:"el-icon-delete",size:"mini",disabled:1==n.id},on:{click:function(t){return t.stopPropagation(),e.openDeleteModal(a,n)}}},[e._v("\n\t\t\t\t\t\t删除\n\t\t\t\t\t")])],1)])}}])})],1),r("el-dialog",{attrs:{title:"编辑节点",visible:e.EditModalVisible},on:{"update:visible":function(t){e.EditModalVisible=t}}},[r("el-form",{attrs:{"label-width":"80px","label-position":"left"}},[r("el-form-item",{attrs:{label:"名称"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),r("el-form-item",{attrs:{label:"图片"}},[r("single-upload",{attrs:{action:"/api/upload/common/",url:e.editForm.img},on:{"update:url":function(t){return e.$set(e.editForm,"img",t)}}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.EditModalVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.UpdateNodeHandle}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"添加节点",visible:e.AddModalVisible},on:{"update:visible":function(t){e.AddModalVisible=t}}},[r("el-form",{attrs:{"label-width":"80px","label-position":"left"}},[r("el-form-item",{attrs:{label:"名称"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),r("el-form-item",{attrs:{label:"图片"}},[r("single-upload",{attrs:{action:"/api/upload/common/",url:e.addForm.img},on:{"update:url":function(t){return e.$set(e.addForm,"img",t)}}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.AddModalVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.AddNodeHandle}},[e._v("确 定")])],1)],1)],1)},ht=[];function bt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function gt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bt(r,!0).forEach(function(t){Object(f["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bt(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var vt={components:{SingleUpload:Oe},data:function(){return{defaultProps:{label:"name"},headers:{Authorization:"Bearer ".concat(sessionStorage.token)},EditModalVisible:!1,editForm:{name:"",pId:"",img:""},AddModalVisible:!1,addForm:{name:"",pId:"",img:""},currentNodeData:"",currentNode:""}},methods:{loadNode:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t,r){var a,n,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.level){e.next=6;break}return e.next=3,T.load({pId:0});case 3:return a=e.sent,n=a.data,e.abrupt("return",r(n));case 6:return e.next=8,T.load({pId:t.data.id});case 8:o=e.sent,s=o.data,r(s);case 11:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}(),openEditModal:function(e,t){this.EditModalVisible=!0,this.editForm=gt({},t),this.currentNode=e},UpdateNodeHandle:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T.update(gt({},this.editForm));case 2:t=e.sent,r=t.status,a=t.msg,r&&(this.$message.success(a),this.EditModalVisible=!1,this.currentNode.data=gt({},this.editForm));case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),openAddModal:function(e,t){this.addForm.pId=t.id,this.AddModalVisible=!0,this.currentNode=e},AddNodeHandle:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,r,a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T.add(gt({},this.addForm));case 2:if(t=e.sent,r=t.status,a=t.msg,n=t.data,r){e.next=9;break}return this.$message.error(a),e.abrupt("return");case 9:this.$message.success(a),this.AddModalVisible=!1,this.$refs.tree.append(gt({},this.addForm,{},n),this.currentNode),this.addForm={name:"",pId:"",img:""};case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),openDeleteModal:function(e,t){var r=this;this.$confirm("此操作将永久删除该分类, 是否继续?",{type:"warning"}).then(Object(h["a"])(regeneratorRuntime.mark(function a(){var n,o;return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,T.remove({id:t.id});case 2:n=a.sent,o=n.status,o&&(e.remove(),r.$message.success("删除成功!"));case 5:case"end":return a.stop()}},a)}))).catch(function(){r.$message.info("已取消删除")})}}},yt=vt,wt=(r("daa4"),Object(l["a"])(yt,ft,ht,!1,null,"76bfa1de",null)),_t=wt.exports,xt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[e._v("商品列表")])]),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[r("el-table-column",{attrs:{fixed:"",label:"商品名称",width:"550"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"goods"},[r("div",{staticClass:"img"},[r("img",{attrs:{src:t.row.img_md}})]),r("div",{staticClass:"name"},[r("span",[e._v(e._s(t.row.name))]),r("br"),r("span",[e._v("商品货号："+e._s(t.row.articleNo))])])])]}}])}),r("el-table-column",{attrs:{sortable:"",prop:"price",label:"价格"}}),r("el-table-column",{attrs:{sortable:"",prop:"inventory",label:"库存"}}),r("el-table-column",{attrs:{sortable:"",prop:"create_time",label:"发布时间"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("router-link",{staticClass:"am-margin-right-sm",attrs:{to:{name:"GoodsEdit",params:{id:t.row.id}}}},[r("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-edit",size:"small"}})],1),r("el-button",{attrs:{icon:"el-icon-delete",plain:"",type:"danger"},on:{click:function(r){return e.showDeleteModal(t.row.id)}}})]}}])})],1),r("el-pagination",{staticClass:"am-margin-top-sm",attrs:{"page-sizes":[4,8,16,32],"page-size":e.pageSize,total:e.total,background:"",layout:"->,prev,pager,next,sizes,total"},on:{"size-change":e.pageSizeChange,"current-change":e.currentPageChange}})],1)],1)},kt=[],Ot={data:function(){return{tableData:[],total:0,pageSize:4,pageIndex:1}},created:function(){this.loadGoodsList()},methods:{loadGoodsList:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,r,a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,W.list({pageIndex:this.pageIndex,pageSize:this.pageSize});case 2:t=e.sent,r=t.status,a=t.goods,n=t.total,r&&(this.tableData=a,this.total=n);case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),currentPageChange:function(e){this.pageIndex=e,this.loadGoodsList()},pageSizeChange:function(e){this.pageSize=e,this.loadGoodsList()},showDeleteModal:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t){var r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$confirm("确定要删除该商品吗？删除之后无法恢复！！！",{type:"warning"}).then(Object(h["a"])(regeneratorRuntime.mark(function e(){var a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,W.remove({id:t});case 2:a=e.sent,n=a.status,a.msg,n&&(r.$message.success("删除成功！"),r.loadGoodsList());case 6:case"end":return e.stop()}},e)}))).catch(function(){r.$message.info("已取消删除")});case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}},jt=Ot,$t=(r("3c0c"),Object(l["a"])(jt,xt,kt,!1,null,"566d4dec",null)),Ct=$t.exports,Pt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[e._v("发布新商品")])]),r("el-form",{ref:"form",attrs:{model:e.form,"label-position":"left","label-width":"120px"}},[r("el-form-item",{attrs:{label:"商品分类"}},[r("el-select",{attrs:{placeholder:"请选择分类"},model:{value:e.form.cate_1st,callback:function(t){e.$set(e.form,"cate_1st",t)},expression:"form.cate_1st"}},e._l(e.cate_1st_options,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),r("el-select",{attrs:{placeholder:"请选择分类"},model:{value:e.form.cate_2nd,callback:function(t){e.$set(e.form,"cate_2nd",t)},expression:"form.cate_2nd"}},e._l(e.cate_2nd_options,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),r("el-select",{attrs:{placeholder:"请选择分类"},model:{value:e.form.cate_3rd,callback:function(t){e.$set(e.form,"cate_3rd",t)},expression:"form.cate_3rd"}},e._l(e.cate_3rd_options,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"商品名称"}},[r("el-col",{attrs:{span:14}},[r("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"===typeof t?t.trim():t)},expression:"form.name"}})],1),r("el-col",{staticClass:"tip",attrs:{span:24}},[e._v("商品标题名称长度至少3个字符，最长200个汉字")])],1),r("el-form-item",{attrs:{label:"商品卖点"}},[r("el-col",{attrs:{span:14}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.form.hotPoint,callback:function(t){e.$set(e.form,"hotPoint","string"===typeof t?t.trim():t)},expression:"form.hotPoint"}})],1),r("el-col",{staticClass:"tip",attrs:{span:24}},[e._v("商品卖点不能超过140个汉字")])],1),r("el-form-item",{attrs:{label:"商品价格"}},[r("el-col",{attrs:{span:3}},[r("el-input",{model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",e._n("string"===typeof t?t.trim():t))},expression:"form.price"}},[r("template",{slot:"append"},[e._v("元")])],2)],1),r("el-col",{staticClass:"tip",attrs:{span:24}},[e._v("价格必须是0-999999之间的数字，且不能高于市场价")]),r("el-col",{staticClass:"tip",attrs:{span:24}},[e._v("此价格为商品实际销售价格，如果商品存在规格，改价格显示最低价格")])],1),r("el-form-item",{attrs:{label:"市场价"}},[r("el-col",{attrs:{span:3}},[r("el-input",{model:{value:e.form.marketPrice,callback:function(t){e.$set(e.form,"marketPrice",e._n("string"===typeof t?t.trim():t))},expression:"form.marketPrice"}},[r("template",{slot:"append"},[e._v("元")])],2)],1),r("el-col",{staticClass:"tip",attrs:{span:24}},[e._v("价格必须是0-999999之间的数字，此价格仅为市场参考价，请根据实际情况认真填写")])],1),r("el-form-item",{attrs:{label:"成本价"}},[r("el-col",{attrs:{span:3}},[r("el-input",{model:{value:e.form.cost,callback:function(t){e.$set(e.form,"cost",e._n("string"===typeof t?t.trim():t))},expression:"form.cost"}},[r("template",{slot:"append"},[e._v("元")])],2)],1),r("el-col",{staticClass:"tip",attrs:{span:24}},[e._v("价格必须是0-999999之间的数字，此价格为商户对所销售的商品的实际成本价进行备注记录，非必填选项，不会在前台销售页面中显示")])],1),r("el-form-item",{attrs:{label:"折扣"}},[r("el-col",{attrs:{span:3}},[r("el-input",{attrs:{readonly:""},model:{value:e.discount,callback:function(t){e.discount=t},expression:"discount"}},[r("template",{slot:"append"},[e._v("折")])],2)],1),r("el-col",{staticClass:"tip",attrs:{span:24}},[e._v("根据销售价与市场价比例自动生成不需要编辑")])],1),r("el-form-item",{attrs:{label:"商品库存"}},[r("el-col",{attrs:{span:3}},[r("el-input",{model:{value:e.form.inventory,callback:function(t){e.$set(e.form,"inventory",e._n("string"===typeof t?t.trim():t))},expression:"form.inventory"}},[r("template",{slot:"append"},[e._v("件")])],2)],1),r("el-col",{staticClass:"tip",attrs:{span:24}},[e._v("价格必须是0-999999之间的整数")]),r("el-col",{staticClass:"tip",attrs:{span:24}},[e._v("若启动了库存配置，则系统自动计算商品的总数，此处无需卖家填写")])],1),r("el-form-item",{attrs:{label:"商品货号"}},[r("el-col",{attrs:{span:3}},[r("el-input",{model:{value:e.form.articleNo,callback:function(t){e.$set(e.form,"articleNo","string"===typeof t?t.trim():t)},expression:"form.articleNo"}})],1),r("el-col",{staticClass:"tip",attrs:{span:24}},[e._v("商品货号是商家管理商品的编号，买家不可见")]),r("el-col",{staticClass:"tip",attrs:{span:24}},[e._v("最多输入20个字符，只支持输入中文、字母、数字、_、/、-和小数点")])],1),r("el-form-item",{attrs:{label:"商品主图"}},[r("el-upload",{attrs:{limit:1,"list-type":"picture-card",action:"/api/upload/goods/",headers:e.headers,"before-upload":e.handleBeforeUpload,"on-success":e.handleMainSuccess,"before-remove":e.handleMainBeforeRemove,"on-exceed":e.handleMainExceed,"on-error":e.handleError,"on-preview":e.handleCardPreview}},[r("i",{staticClass:"el-icon-plus"})]),r("el-col",{staticClass:"tip",attrs:{span:24}},[e._v("上传商品默认主图，如多规格时将默认图片或分规格上传规格主图，支持jpg、if、png格式上传或从图片空间选中，建议使用尺寸\n\t\t\t\t\t800*800像素以上，大小不超过1M的正方形图片，上传后的图片将自动保存在图片空间的默认分类中")])],1),r("el-form-item",{attrs:{label:"商品轮播图"}},[r("el-upload",{attrs:{limit:6,"list-type":"picture-card",action:"/api/upload/slider/",headers:e.headers,"before-upload":e.handleBeforeUpload,"on-success":e.handleSliderSuccess,"on-exceed":e.handleSliderExceed,"before-remove":e.handleSliderBeforeRemove,"on-error":e.handleError,"on-preview":e.handleCardPreview}},[r("i",{staticClass:"el-icon-plus"})]),r("el-col",{staticClass:"tip",attrs:{span:24}},[e._v("上传商品默认主图，如多规格时将默认图片或分规格上传规格主图，支持jpg、if、png格式上传或从图片空间选中，建议使用尺寸\n\t\t\t\t\t800*800像素以上，大小不超过1M的正方形图片，上传后的图片将自动保存在图片空间的默认分类中")])],1),r("div",{staticClass:"section-title"},[e._v("商品详情描述")]),r("el-form-item",{attrs:{label:"商品品牌"}},[r("el-col",{attrs:{span:14}},[r("el-input",{model:{value:e.form.brand,callback:function(t){e.$set(e.form,"brand","string"===typeof t?t.trim():t)},expression:"form.brand"}})],1)],1),r("el-form-item",{attrs:{label:"商品描述"}},[r("div",{ref:"toolbar",staticClass:"w-e-toolbar"}),r("div",{ref:"editor",staticClass:"w-e-text-container"})]),r("div",{staticClass:"section-title"},[e._v("商品物流信息")]),r("el-form-item",{attrs:{label:"所在地"}},[r("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.form.province,callback:function(t){e.$set(e.form,"province",t)},expression:"form.province"}},[r("el-option",{attrs:{label:"区域一",value:"shanghai"}}),r("el-option",{attrs:{label:"区域二",value:"beijing"}}),r("el-option",{attrs:{label:"区域三",value:"beijing"}})],1),r("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.form.city,callback:function(t){e.$set(e.form,"city",t)},expression:"form.city"}},[r("el-option",{attrs:{label:"区域一",value:"shanghai"}}),r("el-option",{attrs:{label:"区域二",value:"beijing"}}),r("el-option",{attrs:{label:"区域三",value:"beijing"}})],1),r("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.form.area,callback:function(t){e.$set(e.form,"area",t)},expression:"form.area"}},[r("el-option",{attrs:{label:"区域一",value:"shanghai"}}),r("el-option",{attrs:{label:"区域二",value:"beijing"}}),r("el-option",{attrs:{label:"区域三",value:"beijing"}})],1)],1),r("el-form-item",{attrs:{label:"运费"}},[r("el-col",{attrs:{span:3}},[r("el-input",{model:{value:e.form.freight,callback:function(t){e.$set(e.form,"freight","string"===typeof t?t.trim():t)},expression:"form.freight"}},[r("template",{slot:"append"},[e._v("元")])],2)],1),r("el-col",{staticClass:"tip",attrs:{span:24}},[e._v("运费设为0，前台商品将显示免运费")])],1),r("el-form-item",[r("el-button",{attrs:{type:"success"},on:{click:e.releaseHandle}},[e._v("提交")])],1)],1),r("el-dialog",{attrs:{width:"30%",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)],1)},Mt=[],St=r("75fc"),Rt=(r("20d6"),r("1a0b")),It=r.n(Rt);function Et(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function Ft(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Et(r,!0).forEach(function(t){Object(f["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Et(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Dt={data:function(){return{dialogImageUrl:"",dialogVisible:!1,headers:{Authorization:"Bearer ".concat(sessionStorage.token)},form:{cate_1st:"",cate_2nd:"",cate_3rd:"",hotPoint:"",name:"",price:"",marketPrice:"",cost:"",discount:"",inventory:"",articleNo:"",img_lg:"",img_md:"",slider:"",brand:"",detail:"",freight:"0",province:"山东省",city:"青岛市",area:"城阳区"},cate_1st_options:[],cate_2nd_options:[],cate_3rd_options:[]}},computed:{discount:function(){var e=(this.form.price/this.form.marketPrice*10).toFixed(2);switch(this.form.discount=e,e){case"NaN":return"";case"Infinity":return"";default:return e}}},mounted:function(){var e=this,t=new It.a(this.$refs.toolbar,this.$refs.editor);t.customConfig.zIndex=100,t.customConfig.uploadImgServer="/api/upload/editor/",t.customConfig.uploadFileName="file",t.customConfig.uploadImgHeaders={Authorization:"Bearer ".concat(sessionStorage.token)},t.customConfig.onchange=function(t){e.form.detail=t},t.create()},created:function(){this.cateChangeHandle(1,"cate_1st")},watch:{"form.cate_1st":function(e,t){this.cateChangeHandle(e,"cate_2nd")},"form.cate_2nd":function(e,t){this.cateChangeHandle(e,"cate_3rd")}},methods:{cateChangeHandle:function(e,t){var r=this;if(!e)return!1;this.getOptions(e).then(function(e){if(r[t+"_options"]=e,0==e.length)return r.form[t]="",!1;r.form[t]=e[0].id})},getOptions:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t){var r,a,n,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T.load({pId:t});case 2:if(r=e.sent,a=r.status,n=r.data,o=r.msg,!a){e.next=10;break}return e.abrupt("return",Promise.resolve(n));case 10:this.$message.error(o);case 11:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),handleMainSuccess:function(e){var t=e.status,r=e.lgImg,a=e.mdImg;t&&(this.form.img_lg=r,this.form.img_md=a)},handleError:function(e,t,r){var a=e.status,n=e.message;switch(a){case 401:this.$message.error("错误:401,Token失效,请重新登录!");break;case 400:n=JSON.parse(n),this.$message.error("错误:400,".concat(n.msg));break;default:this.$message.error("错误:".concat(a,",").concat(n,"!"));break}},handleBeforeUpload:function(e){var t=/^image\/(jpe?g|png)$/,r=t.test(e.type),a=e.size/1024/1024<2;return r||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),r&&a},handleMainBeforeRemove:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t,r){var a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ce.remove({src:"."+t.response.lgImg});case 3:return a=e.sent,e.next=6,ce.remove({src:"."+t.response.mdImg});case 6:if(n=e.sent,!a.status||!n.status){e.next=13;break}return this.form.img_lg="",this.form.img_md="",e.abrupt("return",!0);case 13:return e.abrupt("return",!1);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](0),this.$message.error(e.t0);case 19:case"end":return e.stop()}},e,this,[[0,16]])}));function t(t,r){return e.apply(this,arguments)}return t}(),handleCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleMainExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},handleSliderSuccess:function(e,t,r){e.status&&(this.form.slider=this.convertFileList(r))},handleSliderExceed:function(e,t){this.$message.warning("当前限制选择 6 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},handleSliderBeforeRemove:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t,r){var a,n,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ce.remove({src:"."+t.response.src});case 2:if(a=e.sent,n=a.status,!n){e.next=12;break}return o=r.findIndex(function(e){return e.url==t.response.src}),s=Object(St["a"])(r),s.splice(o,1),this.form.slider=this.convertFileList(s),e.abrupt("return",!0);case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}(),convertFileList:function(e){var t=[];return e.forEach(function(e,r){t.push(e.response.src)}),t.toString()},releaseHandle:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,W.release(Ft({},this.form));case 2:t=e.sent,r=t.status,r&&this.$message.success("发布商品成功！");case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},At=Dt,Nt=(r("4aa1"),Object(l["a"])(At,Pt,Mt,!1,null,"34b22bb5",null)),Vt=Nt.exports,Ut=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[e._v("编辑商品")])]),r("el-form",{ref:"form",attrs:{model:e.form,"label-position":"left","label-width":"120px"}},[r("el-form-item",{attrs:{label:"商品分类"}},[r("el-select",{attrs:{placeholder:"请选择分类"},on:{change:e.cate_1st_handle},model:{value:e.form.cate_1st,callback:function(t){e.$set(e.form,"cate_1st",t)},expression:"form.cate_1st"}},e._l(e.cate_1st_options,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),r("el-select",{attrs:{placeholder:"请选择分类"},on:{change:e.cate_2nd_handle},model:{value:e.form.cate_2nd,callback:function(t){e.$set(e.form,"cate_2nd",t)},expression:"form.cate_2nd"}},e._l(e.cate_2nd_options,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),r("el-select",{attrs:{placeholder:"请选择分类"},model:{value:e.form.cate_3rd,callback:function(t){e.$set(e.form,"cate_3rd",t)},expression:"form.cate_3rd"}},e._l(e.cate_3rd_options,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"商品名称"}},[r("el-col",{attrs:{span:14}},[r("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"===typeof t?t.trim():t)},expression:"form.name"}})],1),r("el-col",{staticClass:"tip",attrs:{span:24}},[e._v("商品标题名称长度至少3个字符，最长200个汉字")])],1),r("el-form-item",{attrs:{label:"商品卖点"}},[r("el-col",{attrs:{span:14}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.form.hotPoint,callback:function(t){e.$set(e.form,"hotPoint","string"===typeof t?t.trim():t)},expression:"form.hotPoint"}})],1),r("el-col",{staticClass:"tip",attrs:{span:24}},[e._v("商品卖点不能超过140个汉字")])],1),r("el-form-item",{attrs:{label:"商品价格"}},[r("el-col",{attrs:{span:3}},[r("el-input",{model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",e._n("string"===typeof t?t.trim():t))},expression:"form.price"}},[r("template",{slot:"append"},[e._v("元")])],2)],1),r("el-col",{staticClass:"tip",attrs:{span:24}},[e._v("价格必须是0-999999之间的数字，且不能高于市场价")]),r("el-col",{staticClass:"tip",attrs:{span:24}},[e._v("此价格为商品实际销售价格，如果商品存在规格，改价格显示最低价格")])],1),r("el-form-item",{attrs:{label:"市场价"}},[r("el-col",{attrs:{span:3}},[r("el-input",{model:{value:e.form.marketPrice,callback:function(t){e.$set(e.form,"marketPrice",e._n("string"===typeof t?t.trim():t))},expression:"form.marketPrice"}},[r("template",{slot:"append"},[e._v("元")])],2)],1),r("el-col",{staticClass:"tip",attrs:{span:24}},[e._v("价格必须是0-999999之间的数字，此价格仅为市场参考价，请根据实际情况认真填写")])],1),r("el-form-item",{attrs:{label:"成本价"}},[r("el-col",{attrs:{span:3}},[r("el-input",{model:{value:e.form.cost,callback:function(t){e.$set(e.form,"cost",e._n("string"===typeof t?t.trim():t))},expression:"form.cost"}},[r("template",{slot:"append"},[e._v("元")])],2)],1),r("el-col",{staticClass:"tip",attrs:{span:24}},[e._v("价格必须是0-999999之间的数字，此价格为商户对所销售的商品的实际成本价进行备注记录，非必填选项，不会在前台销售页面中显示")])],1),r("el-form-item",{attrs:{label:"折扣"}},[r("el-col",{attrs:{span:3}},[r("el-input",{attrs:{readonly:""},model:{value:e.discount,callback:function(t){e.discount=t},expression:"discount"}},[r("template",{slot:"append"},[e._v("折")])],2)],1),r("el-col",{staticClass:"tip",attrs:{span:24}},[e._v("根据销售价与市场价比例自动生成不需要编辑")])],1),r("el-form-item",{attrs:{label:"商品库存"}},[r("el-col",{attrs:{span:3}},[r("el-input",{model:{value:e.form.inventory,callback:function(t){e.$set(e.form,"inventory",e._n("string"===typeof t?t.trim():t))},expression:"form.inventory"}},[r("template",{slot:"append"},[e._v("件")])],2)],1),r("el-col",{staticClass:"tip",attrs:{span:24}},[e._v("价格必须是0-999999之间的整数")]),r("el-col",{staticClass:"tip",attrs:{span:24}},[e._v("若启动了库存配置，则系统自动计算商品的总数，此处无需卖家填写")])],1),r("el-form-item",{attrs:{label:"商品货号"}},[r("el-col",{attrs:{span:3}},[r("el-input",{model:{value:e.form.articleNo,callback:function(t){e.$set(e.form,"articleNo","string"===typeof t?t.trim():t)},expression:"form.articleNo"}})],1),r("el-col",{staticClass:"tip",attrs:{span:24}},[e._v("商品货号是商家管理商品的编号，买家不可见")]),r("el-col",{staticClass:"tip",attrs:{span:24}},[e._v("最多输入20个字符，只支持输入中文、字母、数字、_、/、-和小数点")])],1),r("el-form-item",{attrs:{label:"商品主图"}},[r("single-upload",{attrs:{action:"/api/upload/goods/",url:e.form.avatar},on:{"update:url":function(t){return e.$set(e.form,"avatar",t)}}}),r("el-upload",{attrs:{limit:1,action:"/api/upload/goods/","file-list":e.mainFileList,headers:e.headers,"list-type":"picture-card","before-upload":e.handleBeforeUpload,"on-success":e.handleMainSuccess,"before-remove":e.handleMainBeforeRemove,"on-exceed":e.handleMainExceed,"on-error":e.handleError,"on-preview":e.handleCardPreview}},[r("i",{staticClass:"el-icon-plus"})]),r("el-col",{staticClass:"tip",attrs:{span:24}},[e._v("\n\t\t\t\t\t上传商品默认主图，如多规格时将默认图片或分规格上传规格主图，支持jpg、if、png格式上传或从图片空间选中，建议使用尺寸\n\t\t\t\t\t800*800像素以上，大小不超过1M的正方形图片，上传后的图片将自动保存在图片空间的默认分类中\n\t\t\t\t")])],1),r("el-form-item",{attrs:{label:"商品轮播图"}},[r("el-upload",{attrs:{limit:6,action:"/api/upload/slider/","file-list":e.sliderFileList,headers:e.headers,"list-type":"picture-card","before-upload":e.handleBeforeUpload,"on-success":e.handleSliderSuccess,"on-exceed":e.handleSliderExceed,"before-remove":e.handleSliderBeforeRemove,"on-error":e.handleError,"on-preview":e.handleCardPreview}},[r("i",{staticClass:"el-icon-plus"})]),r("el-col",{staticClass:"tip",attrs:{span:24}},[e._v("\n\t\t\t\t\t上传商品默认主图，如多规格时将默认图片或分规格上传规格主图，支持jpg、if、png格式上传或从图片空间选中，建议使用尺寸\n\t\t\t\t\t800*800像素以上，大小不超过1M的正方形图片，上传后的图片将自动保存在图片空间的默认分类中\n\t\t\t\t")])],1),r("div",{staticClass:"section-title"},[e._v("商品详情描述")]),r("el-form-item",{attrs:{label:"商品品牌"}},[r("el-col",{attrs:{span:14}},[r("el-input",{model:{value:e.form.brand,callback:function(t){e.$set(e.form,"brand","string"===typeof t?t.trim():t)},expression:"form.brand"}})],1)],1),r("el-form-item",{attrs:{label:"商品描述"}},[r("div",{ref:"toolbar",staticClass:"w-e-toolbar"}),r("div",{ref:"editor",staticClass:"w-e-text-container"})]),r("div",{staticClass:"section-title"},[e._v("商品物流信息")]),r("el-form-item",{attrs:{label:"所在地"}},[r("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.form.province,callback:function(t){e.$set(e.form,"province",t)},expression:"form.province"}},[r("el-option",{attrs:{label:"区域一",value:"shanghai"}}),r("el-option",{attrs:{label:"区域二",value:"beijing"}}),r("el-option",{attrs:{label:"区域三",value:"beijing"}})],1),r("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.form.city,callback:function(t){e.$set(e.form,"city",t)},expression:"form.city"}},[r("el-option",{attrs:{label:"区域一",value:"shanghai"}}),r("el-option",{attrs:{label:"区域二",value:"beijing"}}),r("el-option",{attrs:{label:"区域三",value:"beijing"}})],1),r("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.form.area,callback:function(t){e.$set(e.form,"area",t)},expression:"form.area"}},[r("el-option",{attrs:{label:"区域一",value:"shanghai"}}),r("el-option",{attrs:{label:"区域二",value:"beijing"}}),r("el-option",{attrs:{label:"区域三",value:"beijing"}})],1)],1),r("el-form-item",{attrs:{label:"运费"}},[r("el-col",{attrs:{span:3}},[r("el-input",{model:{value:e.form.freight,callback:function(t){e.$set(e.form,"freight","string"===typeof t?t.trim():t)},expression:"form.freight"}},[r("template",{slot:"append"},[e._v("元")])],2)],1),r("el-col",{staticClass:"tip",attrs:{span:24}},[e._v("运费设为0，前台商品将显示免运费")])],1),r("el-form-item",[r("el-button",{attrs:{type:"success"},on:{click:e.editHandle}},[e._v("提交")])],1)],1),r("el-dialog",{attrs:{width:"30%",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)],1)},zt=[],Ht=(r("28a5"),{props:["id"],data:function(){return{dialogImageUrl:"",dialogVisible:!1,headers:{Authorization:"Bearer ".concat(sessionStorage.token)},form:{cate_1st:"",cate_2nd:"",cate_3rd:"",hotPoint:"",name:"",price:"",marketPrice:"",cost:"",discount:"",inventory:"",articleNo:"",img_lg:"",img_md:"",slider:"",brand:"",detail:"",freight:"0",province:"山东省",city:"青岛市",area:"城阳区"},cate_1st_options:[],cate_2nd_options:[],cate_3rd_options:[],mainFileList:[],sliderFileList:[]}},computed:{discount:function(){var e=(this.form.price/this.form.marketPrice*10).toFixed(2);switch(this.form.discount=e,e){case"NaN":return"";case"Infinity":return"";default:return e}}},mounted:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,r,a,n,o=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getDetail();case 2:t=e.sent,r=new It.a(this.$refs.toolbar,this.$refs.editor),r.customConfig.zIndex=100,r.customConfig.uploadImgServer="/api/upload/editor/",r.customConfig.uploadFileName="file",r.customConfig.uploadImgHeaders={Authorization:"Bearer ".concat(sessionStorage.token)},r.customConfig.onchange=function(e){o.form.detail=e},r.create(),r.txt.html(t.detail),this.cateChangeHandle(1,"cate_1st",!1),this.cateChangeHandle(t.cate_1st,"cate_2nd",!1),this.cateChangeHandle(t.cate_2nd,"cate_3rd",!1),t.img_md&&(this.mainFileList=[{name:"1.jpg",url:t.img_md}]),a=t.slider.split(","),n=a.map(function(e,t){var r={};return r.url=e,r.name=t+".jpg",r.response={src:e},r}),this.sliderFileList=n;case 18:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:{getDetail:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,W.getDetail({id:this.id});case 2:if(t=e.sent,r=t.status,a=t.data,!r){e.next=9;break}return this.form=a,this.form.id=this.id,e.abrupt("return",Promise.resolve(a));case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),cate_1st_handle:function(e){this.cateChangeHandle(e,"cate_2nd")},cate_2nd_handle:function(e){this.cateChangeHandle(e,"cate_3rd")},cateChangeHandle:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t,r){var a,n,o=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=!(o.length>2&&void 0!==o[2])||o[2],e.next=3,this.getOptions(t);case 3:if(n=e.sent,this[r+"_options"]=n,0!==n.length){e.next=8;break}return this.form[r]="",e.abrupt("return",!1);case 8:a&&(this.form[r]=n[0].id);case 9:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}(),getOptions:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t){var r,a,n,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T.load({pId:t});case 2:if(r=e.sent,a=r.status,n=r.data,o=r.msg,!a){e.next=10;break}return e.abrupt("return",Promise.resolve(n));case 10:this.$message.error(o);case 11:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),handleMainSuccess:function(e,t,r){e.status&&(this.form.img_lg=e.lgImg,this.form.img_md=e.mdImg)},handleError:function(e,t,r){var a=e.status,n=e.message;switch(a){case 401:this.$message.error("错误:401,Token失效,请重新登录!");break;case 400:n=JSON.parse(n),this.$message.error("错误:400,".concat(n.msg));break;default:this.$message.error("错误:".concat(a,",").concat(n,"!"));break}},handleBeforeUpload:function(e){var t=/^image\/(jpe?g|png)$/,r=t.test(e.type),a=e.size/1024/1024<2;return r||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),r&&a},handleMainBeforeRemove:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t,r){var a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ce.remove({src:"."+this.form.img_lg});case 3:return a=e.sent,e.next=6,ce.remove({src:"."+this.form.img_md});case 6:if(n=e.sent,!a.status||!n.status){e.next=13;break}return this.form.img_lg="",this.form.img_md="",e.abrupt("return",!0);case 13:return e.abrupt("return",!1);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](0),this.$message.error(e.t0);case 19:case"end":return e.stop()}},e,this,[[0,16]])}));function t(t,r){return e.apply(this,arguments)}return t}(),handleCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleMainExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},handleSliderSuccess:function(e,t,r){e.status&&(this.form.slider=this.convertFileList(r))},handleSliderExceed:function(e,t){this.$message.warning("当前限制选择 6 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},handleSliderBeforeRemove:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t,r){var a,n,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ce.remove({src:"."+t.response.src});case 2:if(a=e.sent,n=a.status,!n){e.next=12;break}return o=r.findIndex(function(e){return e.url==t.response.src}),s=Object(St["a"])(r),s.splice(o,1),this.form.slider=this.convertFileList(s),e.abrupt("return",!0);case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}(),convertFileList:function(e){var t=[];return e.forEach(function(e,r){t.push(e.response.src)}),t.toString()},editHandle:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,W.update(this.form);case 2:t=e.sent,r=t.status,r&&this.$message.success("更新商品成功！");case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}}),Lt=Ht,qt=(r("bccc"),Object(l["a"])(Lt,Ut,zt,!1,null,"91ab9492",null)),Bt=qt.exports,Tt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:10}},[r("el-card",{staticClass:"role-card"},[r("div",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[r("span",[e._v("角色列表")]),r("el-button",{attrs:{plain:"",type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.AddModalVisible=!0}}},[e._v("添加角色\n\t\t\t\t\t")])],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[r("el-table-column",{attrs:{prop:"id",label:"#"}}),r("el-table-column",{attrs:{label:"角色"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{attrs:{type:1===t.row.id?"danger":""}},[e._v(e._s(t.row.name))])]}}])}),r("el-table-column",{attrs:{width:"180",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{disabled:1===t.row.id,type:"primary",plain:"",icon:"el-icon-edit"},on:{click:function(r){return e.openEditModal(t.row)}}}),r("el-button",{attrs:{disabled:1===t.row.id,type:"danger",plain:"",icon:"el-icon-delete"},on:{click:function(r){return e.openDeleteModal(t.row.id)}}}),r("router-link",{staticClass:"am-margin-left-sm",attrs:{to:{name:"RoleConfig",params:{id:t.row.id}}}},[r("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-setting"}})],1)]}}])})],1)],1)],1),r("el-col",{attrs:{span:14}},[r("router-view")],1)],1),r("el-dialog",{attrs:{title:"添加角色",visible:e.AddModalVisible},on:{"update:visible":function(t){e.AddModalVisible=t}}},[r("el-form",{attrs:{"label-width":"80px","label-position":"left"}},[r("el-form-item",{attrs:{label:"名称"}},[r("el-input",{model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.AddModalVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addRoleHandle}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"编辑角色",visible:e.EditModalVisible},on:{"update:visible":function(t){e.EditModalVisible=t}}},[r("el-form",{attrs:{"label-width":"80px","label-position":"left"}},[r("el-form-item",{attrs:{label:"名称"}},[r("el-input",{model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.EditModalVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.updateRoleHandle}},[e._v("确 定")])],1)],1)],1)},Gt=[];function Jt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function Zt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jt(r,!0).forEach(function(t){Object(f["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jt(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Kt={name:"Role",data:function(){return{tableData:[],AddModalVisible:!1,addForm:{name:""},EditModalVisible:!1,editForm:{id:"",name:""}}},created:function(){this.loadRole()},methods:{loadRole:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,oe.list();case 2:t=e.sent,r=t.status,a=t.data,r&&(this.tableData=a);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),addRoleHandle:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,oe.add(Zt({},this.addForm));case 2:t=e.sent,r=t.status,r&&(this.loadRole(),this.AddModalVisible=!1);case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),openEditModal:function(e){this.EditModalVisible=!0,this.editForm=Zt({},e)},updateRoleHandle:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,oe.update(Zt({},this.editForm));case 2:t=e.sent,r=t.status,r&&(this.loadRole(),this.EditModalVisible=!1);case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),openDeleteModal:function(e){var t=this;this.$confirm("此操作将永久删除该角色及其关联账户, 是否继续？",{type:"warning"}).then(Object(h["a"])(regeneratorRuntime.mark(function r(){var a,n;return regeneratorRuntime.wrap(function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,oe.remove({id:e});case 2:a=r.sent,n=a.status,n&&(t.loadRole(),t.$message.success("删除成功!"));case 5:case"end":return r.stop()}},r)}))).catch(function(){t.$message.info("已取消删除")})}}},Qt=Kt,Wt=(r("cd35"),Object(l["a"])(Qt,Tt,Gt,!1,null,"902f7c3a",null)),Xt=Wt.exports,Yt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[e._v("菜单权限")])]),r("el-alert",{attrs:{title:"Tips",type:"warning",description:"设置后台管理系统的左侧菜单，目前至多支持两层菜单，三层以上菜单将不会显示。","show-icon":"",closable:!1}}),r("el-tree",{ref:"tree",staticClass:"am-margin-top-lg",attrs:{"default-expanded-keys":[1],lazy:"","node-key":"id",load:e.loadNode,props:e.defaultProps},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,n=t.data;return r("div",{staticClass:"node-box"},[r("div",{staticClass:"node-name"},[e._v("\n\t\t\t\t\t"+e._s(a.label)+"\n\t\t\t\t")]),r("div",{staticClass:"node-action"},[r("el-popover",{staticClass:"am-margin-right-sm",attrs:{placement:"left",trigger:"hover"}},[n.icon?r("i",{staticClass:"am-text-xxl",class:"el-icon-"+n.icon}):r("div",{staticClass:"am-text-xxl"},[e._v("无")]),r("el-button",{attrs:{slot:"reference",type:"text",icon:n.icon?"el-icon-"+n.icon:"",disabled:1==n.id},on:{click:function(t){return t.stopPropagation(),e.openIconModal(a,n)}},slot:"reference"},[e._v("图标\n\t\t\t\t\t\t")])],1),r("el-button",{attrs:{type:"text",icon:"el-icon-edit-outline",disabled:1==n.id},on:{click:function(t){return t.stopPropagation(),e.openEditModal(a,n)}}},[e._v("编辑\n\t\t\t\t\t")]),r("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:function(t){return t.stopPropagation(),e.openAddModal(a,n)}}},[e._v("添加\n\t\t\t\t\t")]),r("el-button",{attrs:{type:"text",icon:"el-icon-delete",disabled:1==n.id},on:{click:function(t){return t.stopPropagation(),e.openDeleteModal(a,n)}}},[e._v("删除\n\t\t\t\t\t")]),r("div",{staticClass:"node-order am-margin-left-sm"},[e._v("\n\t\t\t\t\t\t显示序号："),r("el-tag",{attrs:{size:"mini"}},[e._v(e._s(n.order))])],1)],1)])}}])}),r("el-dialog",{attrs:{title:"编辑节点",visible:e.EditModalVisible},on:{"update:visible":function(t){e.EditModalVisible=t}}},[r("el-form",{attrs:{"label-width":"80px","label-position":"left"}},[r("el-form-item",{attrs:{label:"菜单名称"}},[r("el-input",{model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),r("el-form-item",{attrs:{label:"链接地址"}},[r("el-input",{attrs:{placeholder:"指定此菜单的链接地址，选填"},model:{value:e.editForm.path,callback:function(t){e.$set(e.editForm,"path",t)},expression:"editForm.path"}})],1),r("el-form-item",{attrs:{label:"显示顺序"}},[r("el-input",{attrs:{placeholder:"显示顺序按照数字从小到大，如2001"},model:{value:e.editForm.order,callback:function(t){e.$set(e.editForm,"order",t)},expression:"editForm.order"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.EditModalVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.UpdateNodeHandle}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"选择图标",width:"72%",visible:e.IconModalVisible},on:{"update:visible":function(t){e.IconModalVisible=t}}},[r("ul",{staticClass:"icon-list"},e._l(e.icons,function(t){return r("li",{key:t.id,class:{checked:t.checked},on:{click:function(r){return e.checkIcon(t)}}},[r("span",[r("i",{class:"el-icon-"+t.name}),r("span",{staticClass:"icon-name"},[e._v("el-icon-"+e._s(t.name))])])])}),0),r("el-pagination",{attrs:{background:"",layout:"->,prev, pager, next","page-size":e.pageSize,total:e.iconTotal},on:{"current-change":e.currentPageChange}}),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.IconModalVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.UpdateIconHandle}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"添加节点",visible:e.AddModalVisible},on:{"update:visible":function(t){e.AddModalVisible=t}}},[r("el-form",{attrs:{"label-width":"80px","label-position":"left"}},[r("el-form-item",{attrs:{label:"菜单名称"}},[r("el-input",{model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),r("el-form-item",{attrs:{label:"链接地址"}},[r("el-input",{attrs:{placeholder:"指定此菜单的链接地址，选填"},model:{value:e.addForm.path,callback:function(t){e.$set(e.addForm,"path",t)},expression:"addForm.path"}})],1),r("el-form-item",{attrs:{label:"显示顺序"}},[r("el-input",{attrs:{placeholder:"显示顺序按照数字从小到大，如2001"},model:{value:e.addForm.order,callback:function(t){e.$set(e.addForm,"order",t)},expression:"addForm.order"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.AddModalVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.AddNodeHandle}},[e._v("确 定")])],1)],1)],1)],1)},er=[];r("7f7f");function tr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function rr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tr(r,!0).forEach(function(t){Object(f["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tr(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ar={name:"Menu",data:function(){return{defaultProps:{label:"name"},IconModalVisible:!1,icons:[],pageSize:30,iconTotal:0,checkedIcon:"",checkedIconName:"",EditModalVisible:!1,editForm:{name:"",pId:"",path:"",order:""},AddModalVisible:!1,addForm:{name:"",pId:"",path:"",order:""},currentNodeData:"",currentNode:""}},created:function(){this.loadIcons(1)},methods:{loadNode:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t,r){var a,n,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.level){e.next=6;break}return e.next=3,be.loadSub({pId:0});case 3:return a=e.sent,n=a.data,e.abrupt("return",r(n));case 6:return e.next=8,be.loadSub({pId:t.data.id});case 8:o=e.sent,s=o.data,r(s);case 11:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}(),loadIcons:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t){var r,a,n,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ve.list({pageSize:this.pageSize,pageIndex:t});case 2:r=e.sent,a=r.status,n=r.icons,o=r.total,a&&(n.forEach(function(e){e.checked=!1}),this.icons=n,this.iconTotal=o);case 7:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),openIconModal:function(e,t){this.IconModalVisible=!0,this.currentNodeData=t},currentPageChange:function(e){this.loadIcons(e)},checkIcon:function(e){this.icons.forEach(function(t){t.checked=t==e&&!e.checked}),this.checkedIcon=e.checked?e.id:"",this.checkedIconName=e.checked?e.name:""},UpdateIconHandle:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,be.setIcon({id:this.currentNodeData.id,icon:this.checkedIcon});case 2:t=e.sent,r=t.status,a=t.msg,r&&(this.$message.success(a),this.IconModalVisible=!1,this.currentNodeData.icon=this.checkedIconName);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),openEditModal:function(e,t){this.EditModalVisible=!0,this.editForm=rr({},t),this.currentNode=e},openAddModal:function(e,t){this.addForm.pId=t.id,this.AddModalVisible=!0,this.currentNode=e},openDeleteModal:function(e,t){var r=this;this.$confirm("此操作将永久删除该菜单, 是否继续?",{type:"warning"}).then(Object(h["a"])(regeneratorRuntime.mark(function a(){var n,o;return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,be.remove({id:t.id});case 2:n=a.sent,o=n.status,o&&(e.remove(),r.$message.success("删除成功!"));case 5:case"end":return a.stop()}},a)}))).catch(function(){r.$message.info("已取消删除")})},AddNodeHandle:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,r,a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,be.add(rr({},this.addForm));case 2:if(t=e.sent,r=t.status,a=t.msg,n=t.data,r){e.next=9;break}return this.$message.error(a),e.abrupt("return",!1);case 9:this.$message.success(a),this.AddModalVisible=!1,this.$refs.tree.append(rr({},this.addForm,{},n),this.currentNode),this.addForm={name:"",pId:"",path:""};case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),UpdateNodeHandle:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,be.update(rr({},this.editForm));case 2:t=e.sent,r=t.status,a=t.msg,r&&(this.$message.success(a),this.EditModalVisible=!1,this.currentNode.data=rr({},this.editForm));case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},nr=ar,or=(r("2703"),Object(l["a"])(nr,Yt,er,!1,null,"2a89adf4",null)),sr=or.exports,ir=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",e._l(e.menu,function(t,a){return r("el-card",{key:t.id,staticClass:"am-margin-bottom-sm"},[r("div",{staticClass:"menu-header",attrs:{slot:"header"},slot:"header"},[r("div",{staticClass:"menu-title am-text-sm"},[r("i",{staticClass:"el-icon-collection-tag"}),e._v("\n\t\t\t\t"+e._s(t.name)+"\n\t\t\t")]),r("el-switch",{on:{change:function(r){return e.parentHandle(t)}},model:{value:t.checked,callback:function(r){e.$set(t,"checked",r)},expression:"item.checked"}})],1),r("el-row",{attrs:{gutter:40}},e._l(t.children,function(a){return r("el-col",{key:a.id},[r("div",{staticClass:"menu-box am-padding-vertical-xs"},[r("div",{staticClass:"am-text-xs"},[e._v(e._s(a.name))]),r("el-switch",{on:{change:function(r){return e.childHandle(a,t)}},model:{value:a.checked,callback:function(t){e.$set(a,"checked",t)},expression:"element.checked"}})],1)])}),1)],1)}),1)},lr=[],cr={name:"Role-Setting",props:["id"],data:function(){return{menu:[]}},created:function(){this.loadRoleConfig()},watch:{$route:"loadRoleConfig"},methods:{loadRoleConfig:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var t,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,oe.loadConfig({id:this.id});case 2:t=e.sent,r=t.status,a=t.data,r&&(this.menu=a);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),parentHandle:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t){var r,a,n,o,s,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.checked,a=t.children,n=t.id,!r){e.next=8;break}return e.next=4,oe.createMenu({role_id:this.id,menu_id:n});case 4:o=e.sent,o.status,e.next=12;break;case 8:return e.next=10,oe.removeMenu({role_id:this.id,menu_id:n});case 10:s=e.sent,s.status;case 12:a.forEach(function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t){var a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=7;break}return e.next=3,oe.createMenu({role_id:i.id,menu_id:t.id});case 3:a=e.sent,a.status,e.next=11;break;case 7:return e.next=9,oe.removeMenu({role_id:i.id,menu_id:t.id});case 9:n=e.sent,n.status;case 11:t.checked=r;case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 13:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),childHandle:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t,r){var a,n,o,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.checked,n=t.id,o=r.children.reduce(function(e,t){return t.checked&&e++,e},0),!a){e.next=9;break}return e.next=5,oe.createMenu({role_id:this.id,menu_id:n});case 5:s=e.sent,s.status,e.next=15;break;case 9:return e.next=11,oe.removeMenu({role_id:this.id,menu_id:n});case 11:if(i=e.sent,i.status,1!=o){e.next=15;break}return e.abrupt("return");case 15:e.t0=o,e.next=0===e.t0?18:1===e.t0?22:26;break;case 18:return e.next=20,oe.removeMenu({role_id:this.id,menu_id:r.id});case 20:return r.checked=!1,e.abrupt("break",27);case 22:return e.next=24,oe.createMenu({role_id:this.id,menu_id:r.id});case 24:return r.checked=!0,e.abrupt("break",27);case 26:return e.abrupt("break",27);case 27:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}()}},ur=cr,dr=(r("b67f"),Object(l["a"])(ur,ir,lr,!1,null,"eccc8422",null)),pr=dr.exports;a["default"].use(d["a"]);var mr=[{path:"/register",name:"UserRegister",component:M},{path:"/login",name:"UserLogin",component:_,props:function(e){return e.query},alias:"/"},{path:"/goods",name:"Goods",component:mt,redirect:"/goods/list",meta:{requiredAuth:!0},children:[{path:"category",name:"GoodsCategory",component:_t,meta:{requiredAuth:!0}},{path:"list",name:"GoodsList",component:Ct,meta:{requiredAuth:!0}},{path:"release",name:"GoodsRelease",component:Vt,meta:{requiredAuth:!0}},{path:"edit/:id",name:"GoodsEdit",component:Bt,props:!0,meta:{requiredAuth:!0}}]},{path:"/user",name:"User",component:mt,meta:{requiredAuth:!0},children:[{path:"list",name:"UserList",component:Se,meta:{requiredAuth:!0}},{path:"info",name:"UserInfo",component:Ve,meta:{requiredAuth:!0}}]},{path:"/auth",name:"Auth",component:mt,meta:{requiredAuth:!0},children:[{path:"menu",name:"AuthMenu",component:sr,meta:{requiredAuth:!0}},{path:"role",name:"AuthRole",component:Xt,meta:{requiredAuth:!0},children:[{path:"config/:id",name:"RoleConfig",component:pr,props:!0,meta:{requiredAuth:!0}}]}]},{path:"/order",name:"Index",component:mt,meta:{requiredAuth:!0},children:[{path:"list",name:"OrderList",component:Be,meta:{requiredAuth:!0}}]}],fr=new d["a"]({routes:mr});fr.beforeEach(function(e,t,r){if(e.matched.some(function(e){return e.meta.requiredAuth})){if(!sessionStorage.token)return void r({path:"/login",query:{redirect:e.fullPath}});r()}else r()});var hr=fr,br=function(e,t){var r=e.commit;e.state;return new Promise(function(e,a){z.login(t).then(function(t){t.status?(r("setUserInfo",t.data),e(t)):a(t)})})},gr=function(e,t){var r=e.commit;e.state;return new Promise(function(e,a){z.register(t).then(function(t){t.status?(r("setUserInfo",t.data),e(t)):a(t)})})},vr=function(e,t){var r=e.commit;e.state;return new Promise(function(e,a){z.loadInfo(t).then(function(t){t.status?(r("setUserInfo",t.data),e(t)):a(t)})})},yr=function(e,t){var r=e.commit;e.state;return new Promise(function(e,a){z.update(t).then(function(n){n.status?(r("setUserInfo",t),e(n)):a(n)})})},wr={Login:br,Register:gr,LoadInfo:vr,Update:yr},_r=function(e){return e.userInfo.role},xr=function(e){return e.userInfo.username},kr=function(e){return e.userInfo.avatar},Or={role:_r,username:xr,avatar:kr},jr=function(e,t){e.userInfo=t},$r={setUserInfo:jr},Cr={userInfo:""},Pr={namespaced:!0,state:Cr,actions:wr,getters:Or,mutations:$r},Mr=function(e,t){var r=e.commit;e.state;return new Promise(function(e,a){be.loadTree(t).then(function(t){t.status?(r("StoreTree",t.data),e(t)):a(t)})})},Sr={LoadTree:Mr},Rr={},Ir=function(e,t){e.isCollapse=!e.isCollapse},Er=function(e,t){e.tree=t},Fr={ToggleMenu:Ir,StoreTree:Er},Dr={isCollapse:!1,tree:[]},Ar={namespaced:!0,state:Dr,actions:Sr,getters:Rr,mutations:Fr};a["default"].use(Ke["a"]);var Nr,Vr=new Ke["a"].Store({modules:{User:Pr,Menu:Ar}}),Ur=r("5c96"),zr=r.n(Ur);E.a.interceptors.request.use(function(e){return Nr=Ur["Loading"].service({background:"rgba(0, 0, 0, 0.8)"}),"/api/admin/login"==e.url||"/api/admin/register"==e.url?e:(sessionStorage.token||Ur["Message"].error({message:"token失效，请重新登录系统！",onClose:function(){hr.replace("/login"),Nr.close()}}),e.headers.Authorization="Bearer ".concat(sessionStorage.token),e)},function(e){return Promise.reject(e)}),E.a.interceptors.response.use(function(e){var t=e.status,r=e.data,a=e.response;switch(Nr.close(),t){case 200:return r;default:Ur["Message"].error(a.statusText);break}},function(e){if(401==e.response.status){var t=new Date(e.response.data.inner.expiredAt).toLocaleString();Ur["Message"].error({message:"Token已过期,有效期至".concat(t,"，请重新登录！"),onClose:function(){hr.replace("/login"),Nr.close()}})}return Promise.reject(e)});r("0fae");a["default"].use(zr.a,{size:"small"}),a["default"].config.productionTip=!1,new a["default"]({router:hr,store:Vr,render:function(e){return e(u)}}).$mount("#app")},"5a19":function(e,t,r){},"5c0b":function(e,t,r){"use strict";var a=r("e332"),n=r.n(a);n.a},7653:function(e,t,r){"use strict";var a=r("f507"),n=r.n(a);n.a},"78e2":function(e,t,r){},"7b3b":function(e,t,r){},"7cf8":function(e,t,r){},"8a2d":function(e,t,r){},"9ea9":function(e,t,r){},b1a5:function(e,t,r){},b67f:function(e,t,r){"use strict";var a=r("b1a5"),n=r.n(a);n.a},bccc:function(e,t,r){"use strict";var a=r("78e2"),n=r.n(a);n.a},c286:function(e,t,r){"use strict";var a=r("c9f1"),n=r.n(a);n.a},c9f1:function(e,t,r){},ca9c:function(e,t,r){"use strict";var a=r("5a19"),n=r.n(a);n.a},cd35:function(e,t,r){"use strict";var a=r("0ce0"),n=r.n(a);n.a},cd59:function(e,t,r){"use strict";var a=r("7b3b"),n=r.n(a);n.a},d0f6:function(e,t,r){},d742:function(e,t,r){e.exports=r.p+"img/logo.efe6a81a.png"},d8ed:function(e,t,r){},daa4:function(e,t,r){"use strict";var a=r("0f7c"),n=r.n(a);n.a},e332:function(e,t,r){},e6e5:function(e,t,r){},f507:function(e,t,r){},faf7:function(e,t,r){"use strict";var a=r("d0f6"),n=r.n(a);n.a}});
//# sourceMappingURL=app.5fbf3a36.js.map